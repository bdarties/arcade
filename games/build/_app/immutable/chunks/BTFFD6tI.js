class a{constructor(){this.enabled=!1,this.focusableElements=[],this.currentIndex=0,this.callbacks={onNavigate:null,onValidate:null,onSelect:null,onStart:null},this.handleKeyDown=this.handleKeyDown.bind(this)}enable(e="[data-nav-item]"){this.enabled||(this.discoverElements(e),window.addEventListener("keydown",this.handleKeyDown),this.enabled=!0,this.focusableElements.length>0&&this.setFocus(0))}disable(){this.enabled&&(window.removeEventListener("keydown",this.handleKeyDown),this.enabled=!1,this.clearFocus())}discoverElements(e){const t=document.querySelectorAll(e);this.focusableElements=Array.from(t).filter(s=>!s.disabled&&s.offsetParent!==null)}refresh(e="[data-nav-item]"){const t=this.focusableElements[this.currentIndex];if(this.discoverElements(e),t){const s=this.focusableElements.indexOf(t);s!==-1?this.currentIndex=s:this.currentIndex=0}this.setFocus(this.currentIndex)}handleKeyDown(e){if(!this.enabled)return;const t=e.key.toLowerCase();if(t==="w"||t==="b"){e.preventDefault(),this.notifySelect();return}else if(t==="x"||t==="n"){e.preventDefault(),this.notifyStart();return}this.focusableElements.length!==0&&(t==="z"||t==="arrowup"?(e.preventDefault(),this.navigateUp()):t==="s"||t==="arrowdown"?(e.preventDefault(),this.navigateDown()):t==="q"||t==="arrowleft"?(e.preventDefault(),this.navigateLeft()):t==="d"||t==="arrowright"?(e.preventDefault(),this.navigateRight()):(t==="r"||t==="i")&&(e.preventDefault(),this.validate()))}navigateUp(){if(this.focusableElements.length===0)return;const e=this.currentIndex-1;e>=0&&(this.setFocus(e),this.notifyNavigate("up"))}navigateDown(){if(this.focusableElements.length===0)return;const e=this.currentIndex+1;e<this.focusableElements.length&&(this.setFocus(e),this.notifyNavigate("down"))}navigateLeft(){this.navigateUp(),this.notifyNavigate("left")}navigateRight(){this.navigateDown(),this.notifyNavigate("right")}validate(){if(this.focusableElements.length===0)return;const e=this.focusableElements[this.currentIndex];e&&(e.click(),this.notifyValidate(e))}setFocus(e){if(e<0||e>=this.focusableElements.length)return;this.clearFocus(),this.currentIndex=e;const t=this.focusableElements[e];t.setAttribute("data-nav-focused","true"),t.classList.add("nav-focused"),t.scrollIntoView({behavior:"smooth",block:"nearest"})}clearFocus(){this.focusableElements.forEach(e=>{e.removeAttribute("data-nav-focused"),e.classList.remove("nav-focused")})}onNavigate(e){this.callbacks.onNavigate=e}onValidate(e){this.callbacks.onValidate=e}onSelect(e){this.callbacks.onSelect=e}onStart(e){this.callbacks.onStart=e}notifyNavigate(e){this.callbacks.onNavigate&&this.callbacks.onNavigate(e,this.currentIndex)}notifyValidate(e){this.callbacks.onValidate&&this.callbacks.onValidate(e,this.currentIndex)}notifySelect(){this.callbacks.onSelect&&this.callbacks.onSelect()}notifyStart(){this.callbacks.onStart&&this.callbacks.onStart()}getCurrentElement(){return this.focusableElements[this.currentIndex]||null}dispose(){this.disable(),this.focusableElements=[],this.callbacks={}}}export{a as N};
//# sourceMappingURL=BTFFD6tI.js.map
